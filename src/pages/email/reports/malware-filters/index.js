import { Layout as DashboardLayout } from "/src/layouts/index.js";
import { CippTablePage } from "/src/components/CippComponents/CippTablePage.jsx";
import { Block, Check } from "@mui/icons-material";

const Page = () => {
  return (
    <CippTablePage
      title="List of Malware Filters"
      apiUrl="/api/ListMalwareFilters"
      actions={[
        {
          label: "Enable Rule",
          type: "POST",
          icon: <Check />,
          url: "/api/EditMalwareFilter",
          data: {
            State: "!Enable",
            RuleName: "RuleName",
          },
          confirmText: "Are you sure you want to enable this rule?",
          condition: (row) => row.State === "Disabled",
        },
        {
          label: "Disable Rule",
          type: "POST",
          icon: <Block />,
          url: "/api/EditMalwareFilter",
          data: {
            State: "!Disable",
            RuleName: "RuleName",
          },
          confirmText: "Are you sure you want to disable this rule?",
          condition: (row) => row.State === "Enabled",
        },
        /* Uncomment and add additional actions if required by future specs
        {
          label: "Delete Rule",
          type: "POST",
          url: "/api/RemoveMalwareFilter",
          data: {
            RuleName: "RuleName",
          },
          confirmText: "Are you sure you want to delete this rule?",
        },
        */
      ]}
      offCanvas={{
        extendedInfoFields: ["RuleName", "Name", "State", "WhenCreated", "WhenChanged"],
        actions: [
          {
            label: "Enable Rule",
            color: "info",
          },
          {
            label: "Disable Rule",
            color: "info",
          },
        ],
      }}
      simpleColumns={[
        "RuleName",
        "Name",
        "State",
        "Priority",
        "RecipientDomainIs",
        "EnableFileFilter",
        "FileTypes",
        "FileTypeAction",
        "ZapEnabled",
        "QuarantineTag",
        "EnableInternalSenderAdminNotifications",
        "InternalSenderAdminAddress",
        "EnableExternalSenderAdminNotifications",
        "ExternalSenderAdminAddress",
        "WhenCreated",
        "WhenChanged",
      ]}
    />
  );
};

/* Developer Notes:
  - The tenant data reference "tenant.defaultDomainName" is dynamically handled by the component, per instruction.
  - Original file used useSelector to pull tenant state, now excluded per guidelines.
  - No custom icons (e.g., FontAwesome) are retained here as they are not essential per the new guidelines.
  - Off-Canvas provides basic row details, retaining key info fields from original.
  - Removed unused imports: CButton, faBan, faBook, faCheck, faEllipsisV, faTrash, FontAwesomeIcon, useState, CippActionsOffcanvas, cellDateFormatter, cellBooleanFormatter, CellTip, cellTableFormatter.
  - Confirm Text: Actions with modals to confirm user intent as specified.
  - Additional action for "Delete Rule" is commented for developer convenience, pending further instruction.
*/

Page.getLayout = (page) => <DashboardLayout allTenantsSupport={false}>{page}</DashboardLayout>;

export default Page;
